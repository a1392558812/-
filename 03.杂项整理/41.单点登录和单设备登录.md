## 单点登录和单设备登录

* 单设备登录指：在某个给定的时间，同一用户只能在一台设备上进行登录，如果在其他设备上尝试登录，先前的会话将被中断或注销。
* 单点登录（SSO）指：允许用户使用一组凭据（如用户名和密码）登录到一个系统，然后可以在多个相关系统中，无需重新登录即可访问受保护的资源。

### 单点登录

单点登录可查看之前的博客，`01.杂项整理 > 91.单点登录.md`

### 单设备登录

#### 方法一：令牌验证

* 用户登录`设备A`时生成验证token，并设置过期时间进行缓存
* 用户访问后端接口时候携带token，后端拦截验证token
* 更换设备时候，`新设备B`刚开始没有token，则会走登录页面，在后端重新生成一个token，那么在`设备A`中的token则无法再通过后端验证
* 更换设备时候，`旧设备C`开始有token，但是不同于`设备A`生成的token且过期时间也不同，会被后端拦截，那么在`旧设备C`中的token则无法再通过后端验证

#### 方法二：数据库记录

* 用户登录`设备A`时后端记录用户的账号信息、登录设备信息、IP等。
* 用户访问后端接口时候携带上述的相关信息，后端查询数据库中的登录表，检查是否存在该用户的登录记录。如果存在记录，则比对登录设备、当前设备的IP等来判断是否是同一设备
* 当用户主动退出登录或超过一定时间没有操作时，清除该用户的登录记录。
