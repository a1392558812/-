(self.webpackChunkblog=self.webpackChunkblog||[]).push([[610],{ea1T:function(t,e){!function(t){"use strict";var e=function(){return!0},n=function(){return!1},o=function(){function t(t,e,o){Object.defineProperties(this,{target:{get:function(){return t},set:function(){},enumerable:!0},type:{get:function(){return e},set:function(){},enumerable:!0},args:{get:function(){return o},set:function(){},enumerable:!0}}),this.isDefaultPrevented=n,this.isPropagationStopped=n}var o=t.prototype;return o.preventDefault=function(){this.isDefaultPrevented=e},o.stopPropagation=function(){this.isPropagationStopped=e},t}(),i=function(){function t(){}var e=t.prototype;return e.on=function(t,e){var n=this;if(this.__events=this.__events||{},"object"==typeof t)for(var o in t)t.hasOwnProperty(o)&&(this.__events[o]=this.__events[o]||[],this.__events[o].push(t[o]));else t.split(" ").forEach((function(t){n.__events[t]=n.__events[t]||[],n.__events[t].push(e)}));return this},e.off=function(t,e){var n=this;if("object"==typeof t){for(var o in t)if(t.hasOwnProperty(o)){if(this.__events&&o in this.__events){var i=this.__events[o].indexOf(t[o]);-1!==i&&this.__events[o].splice(i,1)}if(this.__once&&o in this.__once){var a=this.__once[o].indexOf(t[o]);-1!==a&&this.__once[o].splice(a,1)}}}else t?t.split(" ").forEach((function(t){if(n.__events&&t in n.__events)if(e){var o=n.__events[t].indexOf(e);-1!==o&&n.__events[t].splice(o,1)}else n.__events[t].length=0;if(n.__once&&t in n.__once)if(e){var i=n.__once[t].indexOf(e);-1!==i&&n.__once[t].splice(i,1)}else n.__once[t].length=0})):(this.__events={},this.__once={});return this},e.once=function(t,e){var n=this;if(this.__once=this.__once||{},"object"==typeof t)for(var o in t)t.hasOwnProperty(o)&&(this.__once[o]=this.__once[o]||[],this.__once[o].push(t[o]));else t.split(" ").forEach((function(t){n.__once[t]=n.__once[t]||[],n.__once[t].push(e)}));return this},e.trigger=function(t){var e=Array.prototype.slice.call(arguments,1),n=new o(this,t,e);if(this.__events&&t in this.__events)for(var i=0,a=this.__events[t].length;i<a;i++){var r=this.__events[t][i];if("object"==typeof r?r.handleEvent(n):r.call.apply(r,[this,n].concat(e)),n.isPropagationStopped())break}if(this.__once&&t in this.__once){for(var s=0,c=this.__once[t].length;s<c;s++){var l=this.__once[t][s];if("object"==typeof l?l.handleEvent(n):l.call.apply(l,[this,n].concat(e)),n.isPropagationStopped())break}delete this.__once[t]}return n},e.change=function(t,e){var n=Array.prototype.slice.call(arguments,2),i=new o(this,t,n);if(i.value=e,this.__events&&t in this.__events)for(var a=0,r=this.__events[t].length;a<r;a++){var s=this.__events[t][a];if(i.value="object"==typeof s?s.handleEvent(i):s.call.apply(s,[this,i,i.value].concat(n)),i.isPropagationStopped())break}return i.value},t}(),a={EventEmitter:i,Event:o,mixin:function(t){return t="function"==typeof t?t.prototype:t,["on","off","once","trigger","change"].forEach((function(e){t[e]=i.prototype[e]})),t}},r=a.EventEmitter,s=a.mixin;t.Event=a.Event,t.EventEmitter=r,t.default=a,t.mixin=s,Object.defineProperty(t,"__esModule",{value:!0})}(e)},"9KZl":function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return P}});var o=n("XEAi"),i={class:"width100 height100 relative panorama-wrap"};function a(t){return(0,o.dD)("data-v-5db1c9f8"),t=t(),(0,o.Cn)(),t}var r={class:"width100 height100"},s=[a((function(){return(0,o._)("div",{id:"viewer",class:"width100 height100"},null,-1)})),a((function(){return(0,o._)("div",{id:"custom-tooltip-0"},null,-1)})),a((function(){return(0,o._)("div",{id:"custom-tooltip-1"},null,-1)}))];n("07d7"),n("rB9j"),n("EnZy"),n("FZtP");var c=n("42jg"),l=n("JF+l"),u=n("PjIm"),p=n("EVdn"),d=(e={setup:function(t,e){var i=e.emit;(0,o.bv)((function(){var t,e,o,a,r,s,d,h;t=window.location.origin+window.location.pathname,e=n("WjXK"),o=n("DHnP"),a={latitude:{start:-Math.PI/2,end:.2},longitude:{start:Math.PI,end:0},zoom:{start:0,end:50},fisheye:{start:2,end:0}},r={"360bg1":[{id:"custom-tooltip-0",data:{content:"标记custom-tooltip-0"},tooltip:{content:'\n                      <div class="custom-tooltip-content-wrap">\n                        <div class="custom-tooltip-content">提示：这里是黑手之山！</div>\n                        <img class="line-height-1 custom-tooltip-image" src=\''.concat(e,"'/>\n                      </div>\n                      "),className:"custom-tooltip custom-tooltip-0",position:"top",trigger:"click"},latitude:.11,longitude:-.35,image:t+"360range/pin-blue.png",width:32,height:32,anchor:"bottom center"},{id:"custom-tooltip-1",data:{content:"标记custom-tooltip-1"},tooltip:{content:'\n                      <div class="custom-tooltip-content-wrap">\n                        <div class="custom-tooltip-content">哈哈！这里还是黑手之山！</div>\n                        <img class="line-height-1 custom-tooltip-image" src=\''.concat(o,"'/>\n                      </div>\n                      "),className:"custom-tooltip custom-tooltip-1",position:"top",trigger:"click"},latitude:.11,longitude:2.55,image:t+"360range/pin-blue.png",width:32,height:32,anchor:"bottom center"}],"360bg2":[{id:"custom-tooltip-2",data:{content:"标记custom-tooltip-2"},tooltip:{content:"场景2的content",className:"custom-tooltip custom-tooltip-2",position:"top",trigger:"click"},latitude:.31,longitude:-.15,image:t+"360range/pin-blue.png",width:32,height:32,anchor:"bottom center"}],"360bg3":[{id:"custom-tooltip-3",data:{content:"标记custom-tooltip-3"},tooltip:{content:"场景3的content",className:"custom-tooltip custom-tooltip-3",position:"top",trigger:"click"},latitude:.31,longitude:-.25,image:t+"360range/pin-blue.png",width:32,height:32,anchor:"bottom center"}]},s=new c.Viewer({container:document.querySelector("#viewer"),panorama:t+"360range/360bg1.jpg",caption:"大风车啊转啊转~",defaultLat:a.latitude.start,defaultLong:a.longitude.start,defaultZoomLvl:a.zoom.start,fisheye:a.fisheye.start,navbar:["zoom","move","autorotate","markers","markersList","gallery",{title:"Change image",content:"🔄 奥利给，把握住了！！",onClick:function(t,e,n){h().then()}},"caption","fullscreen"],plugins:[[l.MarkersPlugin,{}],[u.GalleryPlugin,{visibleOnLoad:!0,items:[{id:"360bg1",name:"全景1",panorama:t+"360range/360bg1.jpg",thumbnail:t+"360range/preview/preview1.png",options:{caption:"大风车啊转啊转~"}},{id:"360bg2",name:"全景2",panorama:t+"360range/360bg2.jpg",thumbnail:t+"360range/preview/preview2.png",options:{caption:"caption2"}},{id:"360bg3",name:"全景3",panorama:t+"360range/360bg3.jpg",thumbnail:t+"360range/preview/preview3.png",options:{caption:"caption3"}}]}]]}),d=s.getPlugin(l.MarkersPlugin),h=function(){return new Promise((function(t){s.stopAutorotate(),new c.utils.Animation({properties:a,duration:2500,easing:"inOutQuad",onTick:function(t){s.setOption("fisheye",t.fisheye),s.rotate({longitude:t.longitude,latitude:t.latitude}),s.zoom(t.zoom)}}).then((function(){s.setOptions({autorotateLat:a.latitude.end,autorotateDelay:1e3,autorotateIdle:!0}),s.startAutorotate(),t()}))}))},s.on("panorama-loaded",(function(t,e){e=(e=e.panorama.split("/"))[e.length-1].split(".")[0],d.clearMarkers(),r[e].forEach((function(t){d.addMarker(t)}))})),s.on("ready",(function(){s.plugins.markers.on("select-marker",(function(t,e,n){i("select-marker",{e:t,marker:e,data:n})})),p(".psv-gallery-item").click((function(t){d.clearMarkers()})),h().then((function(){s.getPlugin(l.MarkersPlugin).showMarkerTooltip("custom-tooltip-0")}))}))}))}},n("uaZu")),h=(e=(0,d.Z)(e,[["render",function(t,e,n,i,a,c){return(0,o.wg)(),(0,o.iD)("div",r,s)}],["__scopeId","data-v-5db1c9f8"]]),n("gw9Z")),f=n("n/QL"),v={class:"absolute toast-wrap"},g={class:"flex align-items-center line-height-1 toast-content"},_={style:{"margin-right":"20px"}},m=["onClick"],w=[function(t){return(0,o.dD)("data-v-57b1a168"),t=t(),(0,o.Cn)(),t}((function(){return(0,o._)("path",{d:"M282.517333 213.376l-45.354666 45.162667L489.472 512 237.162667 765.461333l45.354666 45.162667L534.613333 557.354667l252.096 253.269333 45.354667-45.162667-252.288-253.44 252.288-253.482666-45.354667-45.162667L534.613333 466.624l-252.096-253.226667z","p-id":"1346"},null,-1)}))],b={class:"width100 duration"};n("x0AG"),n("pDQq");var y=n("wDM7"),k=n("oekR"),P=(0,d.Z)({components:{vrComponent:e,toast:(0,d.Z)({setup:function(t){function e(t,e){var i=n.value.findIndex((function(e){return e.id===t})),a=o.findIndex((function(t){return t===e}));-1!==i&&n.value.splice(i,1),-1!==a&&o.splice(a,1),clearTimeout(e)}var n=(0,k.iH)([]),o=[];return{toastArr:n,addToast:function(t){var i=void 0===(i=t.duration)?3e3:i,a=void 0===(a=t.durationBgColor)?"var(--global-primary-color)":a,r=void 0===(r=t.showCloseBtn)||r,s=void 0===(s=t.showDurationLine)||s,c=(t=t.content,(0,y.Z)()),l=(a={id:c,hiddenTime:i,durationBgColor:a,showCloseBtn:r,showDurationLine:s,content:t},setTimeout((function(){e(c,l)}),i));a.setTimeoutId=l,n.value.push(a),o.push(l)},closeToast:function(t,n){e(t,n)}}}},[["render",function(t,e,n,i,a,r){return(0,o.wg)(),(0,o.iD)("div",v,[(0,o.Wm)(h.W3,{duration:550,name:"nested"},{default:(0,o.w5)((function(){return[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(i.toastArr,(function(t){return(0,o.wg)(),(0,o.iD)("div",{class:"toast overflow-hidden",key:t.id},[(0,o._)("div",g,[(0,o._)("div",_,(0,f.zw)(t.content),1),t.showCloseBtn?((0,o.wg)(),(0,o.iD)("svg",{key:0,onClick:function(e){return i.closeToast(t.id,t.setTimeoutId)},class:"icon cursor-pointer",style:{width:"1.0205078125em",height:"1em","vertical-align":"middle",fill:"currentColor",overflow:"hidden"},viewBox:"0 0 1045 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"1345"},w,8,m)):(0,o.kq)("",!0)]),(0,o._)("div",b,[t.showDurationLine?((0,o.wg)(),(0,o.iD)("div",{key:0,style:(0,f.j5)({backgroundColor:t.durationBgColor,animationDuration:"".concat(t.hiddenTime,"ms")}),class:"duration-line"},null,4)):(0,o.kq)("",!0)])])})),128))]})),_:1})])}],["__scopeId","data-v-57b1a168"]])},setup:function(){var t=(0,k.iH)(null);return{toastRefDom:t,selectMarker:function(e){e.e;var n=e.marker;e.data,t.value.addToast({content:"点击标记的内容：".concat(n.data.content)})}}}},[["render",function(t,e,n,a,r,s){var c=(0,o.up)("vrComponent"),l=(0,o.up)("toast");return(0,o.wg)(),(0,o.iD)("div",i,[(0,o.Wm)(c,{onSelectMarker:a.selectMarker},null,8,["onSelectMarker"]),(0,o.Wm)(l,{ref:"toastRefDom"},null,512)])}],["__scopeId","data-v-17a7dbf3"]])},WjXK:function(t,e,n){"use strict";t.exports=n.p+"static/img/heishou.a580a5c7.png"}}]);