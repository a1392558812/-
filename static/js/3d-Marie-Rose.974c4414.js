(self.webpackChunkblog=self.webpackChunkblog||[]).push([[248],{MZFn:function(e){var n;e.exports=((n=function(){function e(e){return o.appendChild(e.dom),e}function t(e){for(var n=0;n<o.children.length;n++)o.children[n].style.display=n===e?"block":"none";i=e}var a,i=0,o=document.createElement("div"),r=(o.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",o.addEventListener("click",(function(e){e.preventDefault(),t(++i%o.children.length)}),!1),(performance||Date).now()),l=r,d=0,c=e(new n.Panel("FPS","#0ff","#002")),s=e(new n.Panel("MS","#0f0","#020"));return self.performance&&self.performance.memory&&(a=e(new n.Panel("MB","#f08","#201"))),t(0),{REVISION:16,dom:o,addPanel:e,showPanel:t,begin:function(){r=(performance||Date).now()},end:function(){d++;var e,n=(performance||Date).now();return s.update(n-r,200),l+1e3<n&&(c.update(1e3*d/(n-l),100),l=n,d=0,a)&&(e=performance.memory,a.update(e.usedJSHeapSize/1048576,e.jsHeapSizeLimit/1048576)),n},update:function(){r=this.end()},domElement:o,setMode:t}}).Panel=function(e,n,t){var a=1/0,i=0,o=Math.round,r=o(window.devicePixelRatio||1),l=80*r,d=48*r,c=3*r,s=2*r,w=3*r,h=15*r,f=74*r,p=30*r,m=document.createElement("canvas"),u=(m.width=l,m.height=d,m.style.cssText="width:80px;height:48px",m.getContext("2d"));return u.font="bold "+9*r+"px Helvetica,Arial,sans-serif",u.textBaseline="top",u.fillStyle=t,u.fillRect(0,0,l,d),u.fillStyle=n,u.fillText(e,c,s),u.fillRect(w,h,f,p),u.fillStyle=t,u.globalAlpha=.9,u.fillRect(w,h,f,p),{dom:m,update:function(d,g){a=Math.min(a,d),i=Math.max(i,d),u.fillStyle=t,u.globalAlpha=1,u.fillRect(0,0,l,h),u.fillStyle=n,u.fillText(o(d)+" "+e+" ("+o(a)+"-"+o(i)+")",c,s),u.drawImage(m,w+r,h,f-r,p,w,h,f-r,p),u.fillRect(w+f-r,h,r,p),u.fillStyle=t,u.globalAlpha=.9,u.fillRect(w+f-r,h,r,o((1-d/g)*p))}}},n)},ArDV:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return w}});var a=t("XEAi");n=e=>((0,a.dD)("data-v-11efe0cc"),e=e(),(0,a.Cn)(),e);const i={class:"relative canvas-wrap"},o=[n((()=>(0,a._)("div",{id:"canvas"},null,-1))),n((()=>(0,a._)("div",{class:"absolute line-height-1 tips"},[(0,a._)("p",{style:{"margin-bottom":"10px"}},"这个是学习threejs大佬“暮志未晚”的,"),(0,a._)("p",null,[(0,a.Uk)("详情指路："),(0,a._)("a",{href:"http://www.wjceo.com/"},"http://www.wjceo.com/")])],-1)))];var r=t("JVck"),l=t("Womt"),d=t("iZKT"),c=(n=t("MZFn"),t.n(n)),s=t("z6iS"),w=(n={setup(){let e,n,t,i,o,w,h,f,p;const m=new l.Clock;function u(){n.aspect=window.innerWidth/window.innerHeight,n.updateProjectionMatrix(),e.setSize(window.innerWidth,window.innerHeight)}function g(){var a;f.update(),a=m.getDelta(),p&&p.update(a),e.render(t,n),o.update(),requestAnimationFrame(g)}(0,a.bv)((()=>{i={},new d.XS,(e=new l.WebGLRenderer({antialias:!0,logarithmicDepthBuffer:!0})).setSize(window.innerWidth,window.innerHeight),e.shadowMap.enabled=!0,document.getElementById("canvas").appendChild(e.domElement),t=new l.Scene,(n=new l.PerspectiveCamera(45,window.innerWidth/window.innerHeight,.1,1e3)).position.set(0,30,60),n.lookAt(new l.Vector3(0,0,0)),t.add(n),w=new l.AmbientLight("#bbbbbb"),t.add(w),(h=new l.DirectionalLight("#ffffff")).position.set(40,60,10),h.shadow.camera.near=1,h.shadow.camera.far=400,h.shadow.camera.left=-50,h.shadow.camera.right=50,h.shadow.camera.top=50,h.shadow.camera.bottom=-50,h.shadow.mapSize.height=1024,h.shadow.mapSize.width=1024,h.castShadow=!0,n.add(h),function(){var e=new l.PlaneGeometry(1e3,1e3),n=new l.MeshLambertMaterial({color:3355443,side:l.DoubleSide});const a=new l.Mesh(e,n),i=(a.rotation.x=-.5*Math.PI,a.position.y=-.1,a.receiveShadow=!0,t.add(a),new l.Group),o=[];for(let e=0;e<1e3;e++)i.add(function(){const e=new l.MeshBasicMaterial({color:16777215*Math.random()}),n=.5*Math.random(),t=new l.BoxGeometry(n,n,n),a=new l.Mesh(t,e);return a.position.set(100*Math.random()-50,-3,100*Math.random()-50),a.speed=Math.random(),a}()),o.push({speed:Math.random(),y:-3});t.add(i),window.Worker||alert("你的电脑不支持web Workers");const d=new Worker("marie/worker.js");(new r.E).load("marie/scene.gltf",(function(e){e.scene.scale.set(.1,.1,.1),e.scene.traverse((function(e){e.isMesh&&(e.frustumCulled=!1,e.castShadow=!0)})),t.add(e.scene);var n=e.scene;new l.SkeletonHelper(n),(p=new l.AnimationMixer(n)).clipAction(e.animations[0]).play(),d.postMessage(o),d.onmessage=function(e){for(let n=0;n<e.data.length;n++)i.children[n].position.y=e.data[n].y}}))}(),o=new(c()),document.body.appendChild(o.dom),(f=new s.z(n,e.domElement)).target.set(0,15,0),g(),window.onresize=u}))}},(0,t("uaZu").Z)(n,[["render",function(e,n,t,r,l,d){return(0,a.wg)(),(0,a.iD)("div",i,o)}],["__scopeId","data-v-11efe0cc"]]))}}]);