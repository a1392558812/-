(self.webpackChunkblog=self.webpackChunkblog||[]).push([[248],{MZFn:function(e){var t;e.exports=((t=function(){function e(e){return o.appendChild(e.dom),e}function n(e){for(var t=0;t<o.children.length;t++)o.children[t].style.display=t===e?"block":"none";i=e}var a,i=0,o=document.createElement("div"),d=(o.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",o.addEventListener("click",(function(e){e.preventDefault(),n(++i%o.children.length)}),!1),(performance||Date).now()),r=d,l=0,c=e(new t.Panel("FPS","#0ff","#002")),s=e(new t.Panel("MS","#0f0","#020"));return self.performance&&self.performance.memory&&(a=e(new t.Panel("MB","#f08","#201"))),n(0),{REVISION:16,dom:o,addPanel:e,showPanel:n,begin:function(){d=(performance||Date).now()},end:function(){l++;var e,t=(performance||Date).now();return s.update(t-d,200),r+1e3<t&&(c.update(1e3*l/(t-r),100),r=t,l=0,a)&&(e=performance.memory,a.update(e.usedJSHeapSize/1048576,e.jsHeapSizeLimit/1048576)),t},update:function(){d=this.end()},domElement:o,setMode:n}}).Panel=function(e,t,n){var a=1/0,i=0,o=Math.round,d=o(window.devicePixelRatio||1),r=80*d,l=48*d,c=3*d,s=2*d,w=3*d,h=15*d,p=74*d,f=30*d,m=document.createElement("canvas"),u=(m.width=r,m.height=l,m.style.cssText="width:80px;height:48px",m.getContext("2d"));return u.font="bold "+9*d+"px Helvetica,Arial,sans-serif",u.textBaseline="top",u.fillStyle=n,u.fillRect(0,0,r,l),u.fillStyle=t,u.fillText(e,c,s),u.fillRect(w,h,p,f),u.fillStyle=n,u.globalAlpha=.9,u.fillRect(w,h,p,f),{dom:m,update:function(l,v){a=Math.min(a,l),i=Math.max(i,l),u.fillStyle=n,u.globalAlpha=1,u.fillRect(0,0,r,h),u.fillStyle=t,u.fillText(o(l)+" "+e+" ("+o(a)+"-"+o(i)+")",c,s),u.drawImage(m,w+d,h,p-d,f,w,h,p-d,f),u.fillRect(w+p-d,h,d,f),u.fillStyle=n,u.globalAlpha=.9,u.fillRect(w+p-d,h,d,o((1-l/v)*f))}}},t)},q7XX:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return w}});var a=n("XEAi");const i={class:"relative canvas-wrap"},o=[(0,a.uE)('<div id="canvas" data-v-716c84de></div><div class="absolute line-height-1 tips" data-v-716c84de><p style="margin-bottom:10px;" data-v-716c84de>模型拢共大小30Mb，github这网速，慢慢加载吧</p><p style="margin-bottom:10px;" data-v-716c84de>这个是学习threejs大佬“暮志未晚”的,</p><p data-v-716c84de>详情指路：<a href="http://www.wjceo.com/" data-v-716c84de>http://www.wjceo.com/</a></p></div>',2)];var d=n("JVck"),r=n("Womt"),l=n("iZKT"),c=(t=n("MZFn"),n.n(t)),s=n("z6iS"),w=(t={setup(){let e,t,n,i,o,w,h,p,f;const m=new r.Clock;function u(){t.aspect=window.innerWidth/window.innerHeight,t.updateProjectionMatrix(),e.setSize(window.innerWidth,window.innerHeight)}function v(){var a;p.update(),a=m.getDelta(),f&&f.update(a),e.render(n,t),o.update(),requestAnimationFrame(v)}(0,a.bv)((()=>{i={},new l.XS,(e=new r.WebGLRenderer({antialias:!0,logarithmicDepthBuffer:!0})).setSize(window.innerWidth,window.innerHeight),e.shadowMap.enabled=!0,document.getElementById("canvas").appendChild(e.domElement),n=new r.Scene,(t=new r.PerspectiveCamera(45,window.innerWidth/window.innerHeight,.1,1e3)).position.set(0,30,60),t.lookAt(new r.Vector3(0,0,0)),n.add(t),w=new r.AmbientLight("#bbbbbb"),n.add(w),(h=new r.DirectionalLight("#ffffff")).position.set(40,60,10),h.shadow.camera.near=1,h.shadow.camera.far=400,h.shadow.camera.left=-50,h.shadow.camera.right=50,h.shadow.camera.top=50,h.shadow.camera.bottom=-50,h.shadow.mapSize.height=1024,h.shadow.mapSize.width=1024,h.castShadow=!0,t.add(h),function(){var e=new r.PlaneGeometry(1e3,1e3),t=new r.MeshLambertMaterial({color:3355443,side:r.DoubleSide});const a=new r.Mesh(e,t),i=(a.rotation.x=-.5*Math.PI,a.position.y=-.1,a.receiveShadow=!0,n.add(a),new r.Group),o=[];for(let e=0;e<1e3;e++)i.add(function(){const e=new r.MeshBasicMaterial({color:16777215*Math.random()}),t=.5*Math.random(),n=new r.BoxGeometry(t,t,t),a=new r.Mesh(n,e);return a.position.set(100*Math.random()-50,-3,100*Math.random()-50),a.speed=Math.random(),a}()),o.push({speed:Math.random(),y:-3});n.add(i),window.Worker||alert("你的电脑不支持web Workers");const l=new Worker("demo-static/marie/worker.js");(new d.E).load("demo-static/marie/scene.gltf",(function(e){e.scene.scale.set(.1,.1,.1),e.scene.traverse((function(e){e.isMesh&&(e.frustumCulled=!1,e.castShadow=!0)})),n.add(e.scene);var t=e.scene;new r.SkeletonHelper(t),(f=new r.AnimationMixer(t)).clipAction(e.animations[0]).play(),l.postMessage(o),l.onmessage=function(e){for(let t=0;t<e.data.length;t++)i.children[t].position.y=e.data[t].y}}))}(),o=new(c()),document.body.appendChild(o.dom),(p=new s.z(t,e.domElement)).target.set(0,15,0),v(),window.onresize=u}))}},(0,n("uaZu").Z)(t,[["render",function(e,t,n,d,r,l){return(0,a.wg)(),(0,a.iD)("div",i,o)}],["__scopeId","data-v-716c84de"]]))}}]);