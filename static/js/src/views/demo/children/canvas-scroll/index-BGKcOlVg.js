import{f as e}from"../../../../../@vueuse-CzS49P4w.js";import{b as l}from"../../../../common/util/methods-G0pJ8i8C.js";import{_ as a}from"../../../../../plugin-vue_export-helper-BCo6x5W8.js";import{r as s}from"../../../../../@vue-reactivity-mdokXGQ5.js";import{o,U as r,m as t,a as n,g as u,l as c,x as i,y as v}from"../../../../../@vue-runtime-core-lkGMyH8G.js";import{l as f}from"../../../../../@vue-shared-LkD7rn4X.js";import"../../../../../axios-DPD4D5Qz.js";import"../../../../../__commonjsHelpers__-MdiGH4nz.js";const m={name:"view-demo-canvas-scroll",setup(){const a=s(!0),r=s(null),t=s(null),n=s(null),u=new Image,c=e=>`${l()}demo-static/canvas-scroll/large_${e.toString().padStart(4,"0")}.jpg`,i=s((()=>{const e=[];for(let l=0;l<=121;l++)e.push({url:c(l)});return e})()),v=e=>{u.src=c(e),u.onload=()=>{r.value.getContext("2d").drawImage(u,0,0)}},{y:f}=e(t,{onScroll:()=>{const e=n.value.offsetHeight-t.value.offsetHeight;let l=parseInt(f.value/e*i.value.length);l=l>i.value.length-1?i.value.length-1:l,v(l)}});return(()=>{for(let e=0;e<i.value.length;e++){let l=new Image;l.src=i.value[e].url,l.onload=()=>{l=null}}})(),o((()=>{v(0),setTimeout((()=>{a.value=!1}),2500)})),{scrollCanvasRef:r,scrollWrapRef:t,scrollRef:n,loading:a}}},d=(e=>(i("data-v-2b89504f"),e=e(),v(),e))((()=>c("div",{style:{left:"0",top:"0"},class:"fixed"},[c("div",null,"github-page资源访问较慢，这里做2.5s缓冲")],-1))),g={ref:"scrollRef",class:"relative scroll-target"},p={ref:"scrollCanvasRef",width:"1096",height:"724",class:"fixed align-center scroll-canvas"};const h=a(m,[["render",function(e,l,a,s,o,i){const v=r("loading");return t((n(),u("div",{ref:"scrollWrapRef",class:f([s.loading?"":"overflow-y-auto","relative scroll-canvas-wrap"])},[d,c("div",g,null,512),c("canvas",p,null,512)],2)),[[v,s.loading]])}],["__scopeId","data-v-2b89504f"]]);export{h as default};
