const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["../../../../../../css/src/components/loading/loading-B7zpn3iV.css"])))=>i.map(i=>d[i]);
import{_ as t}from"../../../../../vite/preload-helper-Cu0sd_0_.js";import{$ as e}from"../../../../../jquery-IViRahhZ.js";import{n as i}from"./navigator-title-D2A104OI.js";import{l as n}from"../../../../components/loading/loading-BBwpVUlN.js";import{R as r,e as l,o as a,j as o,N as s,P as d,F as h,n as m}from"../../../../../@vue-runtime-core-lkGMyH8G.js";import{r as c}from"../../../../../@vue-reactivity-mdokXGQ5.js";const g={name:"home-markdown-type",components:{navigatorTitle:i,loadingComponent:n,vMdPreview:r((()=>t((()=>import("../../../../components/v-md-preview/index-C56Ma36u.js")),__vite__mapDeps([0]),import.meta.url)))},props:{headerH:{type:String,default:"70px"},loading:{type:Boolean,default:!0},ifLarger:{type:Boolean,default:!0},htmlMD:{type:String,default:""},markdownTitleWidth:{type:String,default:""},title:{type:String,default:""}},setup(t){const i=c(null),n=c([]),r=c("850px"),o=c("calc(100% - 170px)"),s=c(""),d=()=>{if(i.value){const t=i.value.$el.querySelectorAll("h1,h2,h3,h4,h5,h6"),e=Array.from(t).filter((t=>!!t.innerText.trim()));if(!e.length)return void(n.value=[]);const r=Array.from(new Set(e.map((t=>t.tagName)))).sort();n.value=e.map((t=>({title:t.innerText,lineIndex:t.getAttribute("data-v-md-line"),indent:r.indexOf(t.tagName)})))}else setTimeout((()=>{d()}))},h=()=>{o.value=`calc(100% - ${100+e(".home .title").outerHeight()}px)`};return l((()=>t.htmlMD),((t,e)=>{t!==e&&t&&(s.value=t,m().then((()=>{d()})))}),{immediate:!0}),l((()=>t.title),(()=>{h()})),a(h),{preview:i,htmlMarkStr:s,articleTitles:n,markdownMinHeight:o,markdownContentMinWidth:r,handleAnchorClick:t=>{const{lineIndex:n}=t;let r=i.value.$el.querySelector(`[data-v-md-line="${n}"]`);r&&i.value.scrollToTarget({target:r,scrollContainer:e(".home")[0]}),r=null}}},render(){return o(h,null,[o("div",{style:(()=>{const t={};return this.ifLarger?this.articleTitles.length?(t.width=`calc(100% - ${this.markdownTitleWidth})`,t.minWidth=`calc(${this.markdownContentMinWidth} - ${this.markdownTitleWidth})`):(t.width="100%",t.minWidth=`${this.markdownContentMinWidth}`):t.width="100%",t})(),class:"title flex align-items-center justify-content-center"},[this.title]),o("div",{class:"relative markdown",style:{minHeight:this.markdownMinHeight,...this.ifLarger?{minWidth:this.markdownContentMinWidth}:{}}},[this.loading?o(n,{style:"background-color: transparent",showModal:!0},{default:()=>[o("div",{style:"font-weight: bold",class:"width100 height100 flex align-items-center justify-content-center"},[d("加载中...")])]}):o("div",{style:(()=>{const t={};return this.ifLarger&&(this.articleTitles.length?(t.minWidth=`calc(${this.markdownContentMinWidth} - ${this.markdownTitleWidth})`,t.paddingRight=`${this.markdownTitleWidth}`):(t.minWidth=`calc(${this.markdownContentMinWidth})`,t.paddingRight=0)),t})(),class:"flex height100"},[o("div",{class:"width100"},[o(s("v-md-preview"),{class:"width100",ifLarger:this.ifLarger,onGetVMdPreviewRef:t=>{this.preview=t},text:this.htmlMarkStr},null)]),this.ifLarger?o(s("navigator-title"),{ifLarger:this.ifLarger,markdownTitleWidth:this.markdownTitleWidth,articleTitles:this.articleTitles,onHandleAnchorClick:t=>{this.handleAnchorClick(t)}},null):null])])])}};export{g as _};
