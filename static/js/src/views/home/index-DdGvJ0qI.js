import{a as e,u as t}from"../../../vue-router-DBqTrJEm.js";import{u as o}from"../../../vuex-C9rRLaBQ.js";import{c as a,d as i,b as r,S as n,a as l}from"../../store/actionType-CNHuB-Of.js";import{a as s}from"../../common/axios/index-CK6lisJl.js";import{m,i as d,d as p}from"../../common/util/methods-BlEsKu8e.js";import{l as u}from"../../common/props/left-sidebar-props/index-Cvo_KCZG.js";import{l as h}from"../../components/left-sidebar/index-Cuf1TAhJ.js";import{o as c}from"./components/home/other-type-4zob73wR.js";import{i as g}from"./components/home/image-type-xERuTBNi.js";import{m as f}from"./components/home/markdown-type-C-FqyKxE.js";import{_ as v}from"../../../plugin-vue_export-helper-BCo6x5W8.js";import{r as y}from"../../../@vue-reactivity-mdokXGQ5.js";import{b as j,e as w,N as k,U as b,m as x,a as _,g as T,j as L,l as M,F as P,s as D,c as q,x as S,y as C,n as E}from"../../../@vue-runtime-core-lkGMyH8G.js";import{k as F,n as I}from"../../../@vue-shared-LkD7rn4X.js";import"../../../@vue-devtools-api-CFGE8QBr.js";import"../../../axios-DPD4D5Qz.js";import"../../../__commonjsHelpers__-MdiGH4nz.js";import"../../../nprogress-DbBgBvvH.js";import"../../components/left-sidebar/index.vue_vue_type_script_lang-tVqgW1QW.js";import"../../../@vue-runtime-dom-Dkxbnx-0.js";import"../../../@better-scroll-yEU79_0X.js";import"../../common/util/debounce-CNl5k4zp.js";import"../../components/left-sidebar/components/left-sidebar-item-CPRXYt0O.js";import"../../components/left-sidebar/components/left-sidebar-item.vue_vue_type_script_lang-C47xgyCn.js";import"../../components/left-sidebar/components/link-tag-BA05wykv.js";import"../../components/commonm-btn/index-BXWbb5gu.js";import"../../components/left-sidebar/components/left-sidebar-search-Chz6xH7U.js";import"../../../@vueuse-CzS49P4w.js";import"./components/home/image-type.vue_vue_type_script_lang-BDXKvCDt.js";import"./components/home/markdown-type.vue_vue_type_script_lang-DAo4Wxi-.js";import"../../../vite/preload-helper-Cu0sd_0_.js";import"../../../jquery-IViRahhZ.js";import"./components/home/navigator-title-IQm0J74D.js";import"../../components/loading/loading-BBwpVUlN.js";const W={name:"view-home",components:{layoutLeftSidebar:h,markdownType:f,otherType:c,imageType:g},props:{...u},setup(u){const h=e(),c=t(),g=o(),f=y(""),v=y("ReadMe-前言"),k=y(""),b=y("文件"),x=y(!0),_=j((()=>m(k.value))),T=j((()=>d(k.value))),L=j((()=>"link"===k.value)),M=j((()=>g.state.menuData.menuList)),P=()=>{E().then((()=>{document.querySelector(".home").scrollTop=0}))},D=e=>{const t=e.split("-");try{let a={children:M.value};if(t.forEach((e=>{a=a.children[+e]})),!a)return h.push("/");if(Object.prototype.hasOwnProperty.call(a,"children"))throw new Error("不合法的路由参数");if(g.dispatch(r,{indexPage:e}),g.dispatch(n,e),g.dispatch(l,{indexPage:e}),a&&a.link)return o=a.link,x.value=!1,k.value="link",v.value="链接",f.value=o,void window.open(o);const i=a.url[a.url.length-1].split(".");k.value=i[i.length-1]?i[i.length-1]:"";const m=`./${a.url.join("/")}`;if(v.value=a.url.join(" > "),x.value=!0,T.value)return(e=>{f.value=e,P()})(m);if(_.value)return(e=>{s.get(e).then((e=>{x.value=!1,f.value=p.find((e=>e.suffix===k.value.toLocaleLowerCase())).formatFun(e.data),P()})).catch((()=>{f.value="网络寄了，我哭哭~~",k.value="md",x.value=!1}))})(m);((e,t)=>{b.value=e[e.length-1],f.value=t,P()})(a.url,m)}catch(a){h.push("/error")}var o};return w((()=>c.query),(()=>{g.dispatch(a).then((()=>{const e=c.query.indexPage||"";u.toggleMenu(!1),e?D(e):(g.dispatch(i,{indexPage:e}),k.value="md",x.value=!0,s.get("./README.md").then((e=>{x.value=!1,f.value=e.data})).catch((e=>{x.value=!1,f.value="寄拉！"})))}))}),{immediate:!0}),{menuList:M,markdownType:_,markdownTitleWidth:y("300px"),imageType:T,linkType:L,loading:x,htmlMD:f,title:v,fileSuffix:k,downloadName:b,itemClick:e=>{e.indexPage!==c.query.indexPage&&h.push({path:"/",query:{indexPage:e.indexPage}})}}}},H={class:"content-inner bg-white overflow-hidden width100 height100 flex flex-direction-row"},N=(e=>(S("data-v-029c5f48"),e=e(),C(),e))((()=>M("div",{class:"bg-image overflow-hidden width100 height100 absolute"},null,-1))),O={class:"home overflow-auto relative width100 height100"},R={key:0,class:"title width100 flex align-items-center justify-content-center"},$={key:3,class:"link"},A=["href"];const B=v(W,[["render",function(e,t,o,a,i,r){const n=k("layout-left-sidebar"),l=k("markdown-type"),s=k("image-type"),m=k("other-type"),d=b("loading");return x((_(),T("div",H,[L(n,{"left-sidebar-w":e.leftSidebarW,"if-show-menu":e.ifShowMenu,"if-larger":e.ifLarger,"header-h":e.headerH,"toggle-menu":e.toggleMenu,onItemClick:a.itemClick},null,8,["left-sidebar-w","if-show-menu","if-larger","header-h","toggle-menu","onItemClick"]),M("div",{style:I(e.ifLarger?{width:`calc(100% - ${e.leftSidebarW})`}:{width:"100%"}),class:"relative height100"},[N,M("div",O,[a.menuList.length?(_(),T(P,{key:0},[a.markdownType?D("",!0):(_(),T("div",R,F(a.title),1)),a.markdownType?(_(),q(l,{key:1,title:a.title,"markdown-title-width":a.markdownTitleWidth,loading:a.loading,"if-larger":e.ifLarger,"header-h":e.headerH,"html-m-d":a.htmlMD},null,8,["title","markdown-title-width","loading","if-larger","header-h","html-m-d"])):a.imageType?(_(),q(s,{key:2,"html-m-d":a.htmlMD,loading:a.loading,onImageLoad:t[0]||(t[0]=e=>a.loading=!1)},null,8,["html-m-d","loading"])):a.linkType?(_(),T("div",$,[M("a",{href:a.htmlMD},"链接： "+F(a.htmlMD),9,A)])):(_(),q(m,{key:4,"download-name":a.downloadName,"html-m-d":a.htmlMD},null,8,["download-name","html-m-d"]))],64)):D("",!0)])],4)])),[[d,!a.menuList.length]])}],["__scopeId","data-v-029c5f48"]]);export{B as default};
