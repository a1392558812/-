import{u as e}from"../../../@vue-runtime-dom-Dkxbnx-0.js";import{u as t}from"../../../vuex-C9rRLaBQ.js";import{B as s,S as i,M as a,O as l}from"../../../@better-scroll-yEU79_0X.js";import{d as r}from"../../common/util/debounce-CNl5k4zp.js";import{l as n}from"../../common/props/left-sidebar-props/index-Cvo_KCZG.js";import{l as o}from"./components/left-sidebar-item-CPRXYt0O.js";import{c as m}from"../commonm-btn/index-BXWbb5gu.js";import{l as c}from"./components/left-sidebar-search-Chz6xH7U.js";import{S as u,a as d,b as f,c as h,d as p}from"../../store/actionType-CNHuB-Of.js";import{b,e as v,f as g,j as k,n as C}from"../../../@vue-runtime-core-lkGMyH8G.js";import{r as L}from"../../../@vue-reactivity-mdokXGQ5.js";s.use(i),s.use(a),s.use(l);const x={name:"components-left-sidebar",components:{leftSidebarItem:o,leftSidebarSearch:c,commonmBtn:m},props:{...n},setup(e,{emit:i}){const a=t(),l=b((()=>a.state.menuData.menuList)),n=b((()=>{let t="left-sidebar flex-shrink-0 bg-white height100";return t=e.ifLarger?`${t}`:`${t} absolute ${e.ifShowMenu?"translateX-0":"translateX-100"}`,t})),o=L(null),m=L(null),c=()=>{o.value&&o.value.destroy(),o.value=null};return v((()=>e.ifLarger),(e=>{a.dispatch(h).then((()=>{e&&l.value.length?C().then((()=>{c(),o.value=new s(m.value,{click:!0,observeDOM:!0,bounce:!1,scrollbar:{fade:!1,interactive:!0,scrollbarTrackClickable:!0},mouseWheel:{speed:20,invert:!1,easeTime:300}})})):c()}))}),{immediate:!0}),g((()=>{c()})),{menuList:l,listContentRef:m,menuListCloseAll:()=>{r((()=>{a.dispatch(p)}),1e3,!0)},sidebarClassName:n,leftSidebarItemClick:(t,s,l)=>{a.dispatch(u,l.indexPage),a.dispatch(d,l),e.toggleMenu(!1),i("itemClick",l)},leftSidebarListClick:(e,t)=>{a.dispatch(f,t),a.dispatch(u,t.indexPage),i("listClick",t)}}},render(){return k("div",{class:this.sidebarClassName},[this.menuList.length?k("div",{class:"flex height100 relative flex-direction-column left-sidebar-content"},[k(c,{class:"search",toggleMenu:this.toggleMenu,onItemClick:(e,t)=>{this.leftSidebarItemClick(e,[],t)},onMenuListCloseAll:this.menuListCloseAll},null),k("div",{key:this.ifLarger,class:"flex-1 flex-shrink-0 relative list-wrap "+(this.ifLarger?"overflow-y-hidden":"overflow-y-auto")},[k("div",{ref:e=>{this.listContentRef=e},class:"list-content height100 "+(this.ifLarger?"overflow-y-hidden":"")},[k("div",{style:{padding:"0 0 50px 0"}},[this.menuList.map(((e,t)=>k(o,{rowDetails:e,key:`-1-${t}-${e.indexPage}`,grade:-1,menuList:this.menuList,url:[e.name],onItemClick:(e,t,s)=>{this.leftSidebarItemClick(e,t,s)},onListClick:(e,t)=>{this.leftSidebarListClick(e,t)}},null)))])])])]):null])}},j=()=>{e((e=>({"367bc2c5":e.leftSidebarW})))},S=x.setup;x.setup=S?(e,t)=>(j(),S(e,t)):j;export{x as _};
