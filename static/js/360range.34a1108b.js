"use strict";(self.webpackChunkblog=self.webpackChunkblog||[]).push([[1963],{"Bx/C":function(t,e,o){o.d(e,{BP:function(){return c},K0:function(){return i},NP:function(){return u},Pc:function(){return r},Uj:function(){return n},_G:function(){return a},ar:function(){return l},e4:function(){return d},se:function(){return s},wm:function(){return m}}),o("60oc"),o("kvaN"),o("o5/U"),o("pacc"),o("vDqi");const n=[{suffix:"md",formatFun:t=>t},{suffix:"js",formatFun:t=>"```javascript\n"+t+"\n```"},{suffix:"ts",formatFun:t=>"```typescript\n"+t+"\n```"},{suffix:"jsx",formatFun:t=>"```jsx\n"+t+"\n```"},{suffix:"html",formatFun:t=>"```html\n"+t+"\n```"},{suffix:"css",formatFun:t=>"```css\n"+t+"\n```"},{suffix:"less",formatFun:t=>"```less\n"+t+"\n```"},{suffix:"scss",formatFun:t=>"```scss\n"+t+"\n```"},{suffix:"py",formatFun:t=>"```python\n"+t+"\n```"},{suffix:"json",formatFun:t=>"```json\n"+JSON.stringify({jsonData:t})+"\n```"},{suffix:"ejs",formatFun:t=>"```ejs\n"+t+"\n```"},{suffix:"vue",formatFun:t=>"```html\n"+t+"\n```"},{suffix:"txt",formatFun:t=>"```\n"+t+"\n```"}],a=t=>n.filter((e=>e.suffix===t)).length,i=t=>["jpg","png","gif","jpeg"].filter((e=>e===t)).length,r=(t,e=0,o)=>{if(0===(i=t.children("h3")).length)return 0<(n=t.children("a")).length?Object.freeze({name:n.text(),href:n.attr("href"),...n.attr("icon")?{icon:n.attr("icon")}:{}}):null;var n=i.text(),a=[],i={ifRender:!1,ifShow:!1},s=t.children("dl").children("dt");for(let t=0;t<s.length;t++){var l=r(s.eq(t));a.push(l)}return i.name=n,i.child=a,i},s=(t,e)=>Math.round(Math.random()*(e-t)+t),l=()=>window.location.origin+window.location.pathname,c=t=>new Promise((e=>{var o=new FileReader;o.readAsDataURL(t),o.onload=t=>{e(t.target.result)}})),u=(t=!0)=>{var e=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];if(t){let t="#";for(let o=0;o<6;o++)t+=e[Math.floor(Math.random()*e.length)];return t}return`rgb(${Math.floor(256*Math.random())},${Math.floor(256*Math.random())},${Math.floor(256*Math.random())})`},d=t=>{const e="data-loadtype",o="asyncloadjs";return new Promise(((n,a)=>{if(!document)return a(new Error("document not find"));let i=document.querySelector(`script[src="${t}"][${e}="${o}"]`);i&&(i.parentNode.removeChild(i),i=null),(i=document.createElement("script")).type="text/javascript",i.src=t,i.setAttribute(e,o),document.head.appendChild(i),i.onload=t=>{n()},i.onerror=t=>{a(new Error(t))}}))},m=t=>{const e="data-loadtype",o="asyncloadcss";return new Promise(((n,a)=>{if(!document)return a(new Error("document not find"));let i=document.querySelector(`link[href="${t}"][${e}="${o}"]`);i&&(i.parentNode.removeChild(i),i=null),(i=document.createElement("link")).href=t,i.rel="stylesheet",i.type="text/css",i.setAttribute(e,o),document.head.appendChild(i),i.onload=()=>{n()},i.onerror=t=>{a(new Error(t))}}))}},taby:function(t,e,o){o.d(e,{A:function(){return g}});var n=o("XEAi"),a=o("gw9Z"),i=o("n/QL");const r={class:"absolute toast-wrap"},s={class:"flex align-items-center line-height-1 toast-content"},l={style:{"margin-right":"20px"}},c=["onClick"],u=[(t=>((0,n.Qi)("data-v-c9ba59e6"),t=t(),(0,n.jt)(),t))((()=>(0,n.Lk)("path",{d:"M282.517333 213.376l-45.354666 45.162667L489.472 512 237.162667 765.461333l45.354666 45.162667L534.613333 557.354667l252.096 253.269333 45.354667-45.162667-252.288-253.44 252.288-253.482666-45.354667-45.162667L534.613333 466.624l-252.096-253.226667z","p-id":"1346"},null,-1)))],d={class:"width100 duration"};o("60oc");var m=o("wDM7"),p=o("oekR"),g=(e={setup(t){const e=(0,p.KR)([]),o=[],n=(t,n)=>{var a=e.value.findIndex((e=>e.id===t)),i=o.findIndex((t=>t===n));-1!==a&&e.value.splice(a,1),-1!==i&&o.splice(i,1),clearTimeout(n)};return{toastArr:e,addToast:({duration:t=3e3,durationBgColor:a="var(--global-primary-color)",showCloseBtn:i=!0,showDurationLine:r=!0,content:s})=>{const l=(0,m.A)();a={id:l,hiddenTime:t,durationBgColor:a,showCloseBtn:i,showDurationLine:r,content:s};const c=setTimeout((()=>{n(l,c)}),t);a.setTimeoutId=c,e.value.push(a),o.push(c)},closeToast:(t,e)=>{n(t,e)}}}},(0,o("uaZu").A)(e,[["render",function(t,e,o,m,p,g){return(0,n.uX)(),(0,n.CE)("div",r,[(0,n.bF)(a.F,{duration:550,name:"nested"},{default:(0,n.k6)((()=>[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(m.toastArr,(t=>((0,n.uX)(),(0,n.CE)("div",{class:"toast overflow-hidden",key:t.id},[(0,n.Lk)("div",s,[(0,n.Lk)("div",l,(0,i.v_)(t.content),1),t.showCloseBtn?((0,n.uX)(),(0,n.CE)("svg",{key:0,onClick:e=>m.closeToast(t.id,t.setTimeoutId),class:"icon cursor-pointer",style:{width:"1.0205078125em",height:"1em","vertical-align":"middle",fill:"currentColor",overflow:"hidden"},viewBox:"0 0 1045 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"1345"},u,8,c)):(0,n.Q3)("",!0)]),(0,n.Lk)("div",d,[t.showDurationLine?((0,n.uX)(),(0,n.CE)("div",{key:0,style:(0,i.Tr)({backgroundColor:t.durationBgColor,animationDuration:t.hiddenTime+"ms"}),class:"duration-line"},null,4)):(0,n.Q3)("",!0)])])))),128))])),_:1})])}],["__scopeId","data-v-c9ba59e6"]]))},o15v:function(t,e,o){o.r(e),o.d(e,{default:function(){return h}});var n=o("XEAi");const a={class:"width100 height100 relative panorama-wrap"};e=t=>((0,n.Qi)("data-v-4097911c"),t=t(),(0,n.jt)(),t);const i={class:"width100 height100"},r=[e((()=>(0,n.Lk)("div",{id:"viewer",class:"width100 height100"},null,-1))),e((()=>(0,n.Lk)("div",{id:"custom-tooltip-0"},null,-1))),e((()=>(0,n.Lk)("div",{id:"custom-tooltip-1"},null,-1)))];var s=o("42jg"),l=o("JF+l"),c=o("PjIm"),u=o("Bx/C"),d=o("EVdn"),m=(e={setup(t,{emit:e}){(0,n.sV)((()=>{{var t=(0,u.ar)(),n=o("4fZp"),a=o("WXrL");const i={latitude:{start:-Math.PI/2,end:.2},longitude:{start:Math.PI,end:0},zoom:{start:0,end:50},fisheye:{start:2,end:0}},r={"360bg1":[{id:"custom-tooltip-0",data:{content:"标记custom-tooltip-0"},tooltip:{content:`\n                      <div class="custom-tooltip-content-wrap">\n                        <div class="custom-tooltip-content">提示：这里是黑手之山！</div>\n                        <img class="line-height-1 custom-tooltip-image" src='${n}'/>\n                      </div>\n                      `,toastContent:"toastContent1",className:"custom-tooltip custom-tooltip-0",position:"top",trigger:"click"},latitude:.11,longitude:-.35,image:t+"demo-static/360range/pin-blue.png",width:32,height:32,anchor:"bottom center"},{id:"custom-tooltip-1",data:{content:"标记custom-tooltip-1"},tooltip:{content:`\n                      <div class="custom-tooltip-content-wrap">\n                        <div class="custom-tooltip-content">哈哈！这里还是黑手之山！</div>\n                        <img class="line-height-1 display-block custom-tooltip-image" src='${a}'/>\n                      </div>\n                      `,toastContent:"toastContent2",className:"custom-tooltip custom-tooltip-1",position:"top",trigger:"click"},latitude:.11,longitude:2.55,image:t+"demo-static/360range/pin-blue.png",width:32,height:32,anchor:"bottom center"}],"360bg2":[{id:"custom-tooltip-2",data:{content:"标记custom-tooltip-2"},tooltip:{content:"场景2的content🥵🥵",toastContent:"toastContent3",className:"custom-tooltip custom-tooltip-2",position:"top",trigger:"click"},latitude:.31,longitude:-.15,image:t+"demo-static/360range/pin-blue.png",width:32,height:32,anchor:"bottom center"}],"360bg3":[{id:"custom-tooltip-3",data:{content:"标记custom-tooltip-3"},tooltip:{content:"场景3的content🥵🥵",toastContent:"toastContent4",className:"custom-tooltip custom-tooltip-3",position:"top",trigger:"click"},latitude:.31,longitude:-.25,image:t+"demo-static/360range/pin-blue.png",width:32,height:32,anchor:"bottom center"}]},m=new s.Viewer({container:document.querySelector("#viewer"),panorama:t+"demo-static/360range/360bg1.jpg",caption:"大风车啊转啊转~",defaultLat:i.latitude.start,defaultLong:i.longitude.start,defaultZoomLvl:i.zoom.start,fisheye:i.fisheye.start,navbar:["zoom","move","autorotate","markers","markersList","gallery",{title:"Change image",content:"🔄 奥利给，把握住了！！",onClick:(t,e,o)=>{g().then()}},"caption","fullscreen"],plugins:[[l.MarkersPlugin,{}],[c.GalleryPlugin,{visibleOnLoad:!0,items:[{id:"360bg1",name:"全景1",panorama:t+"demo-static/360range/360bg1.jpg",thumbnail:t+"demo-static/360range/preview/preview1.png",options:{caption:"大风车啊转啊转~"}},{id:"360bg2",name:"全景2",panorama:t+"demo-static/360range/360bg2.jpg",thumbnail:t+"demo-static/360range/preview/preview2.png",options:{caption:"caption2"}},{id:"360bg3",name:"全景3",panorama:t+"demo-static/360range/360bg3.jpg",thumbnail:t+"demo-static/360range/preview/preview3.png",options:{caption:"caption3"}}]}]]}),p=m.getPlugin(l.MarkersPlugin),g=()=>new Promise((t=>{m.stopAutorotate(),new s.utils.Animation({properties:i,duration:2500,easing:"inOutQuad",onTick:t=>{m.setOption("fisheye",t.fisheye),m.rotate({longitude:t.longitude,latitude:t.latitude}),m.zoom(t.zoom)}}).then((()=>{m.setOptions({autorotateLat:i.latitude.end,autorotateDelay:1e3,autorotateIdle:!0}),m.startAutorotate(),t()}))}));m.on("panorama-loaded",((t,e)=>{e=(e=e.panorama.split("/"))[e.length-1].split(".")[0],p.clearMarkers(),r[e].forEach((t=>{p.addMarker(t)}))})),m.on("ready",(()=>{m.plugins.markers.on("select-marker",((t,o,n)=>{e("select-marker",{e:t,marker:o,data:n})})),d(".psv-gallery-item").click((t=>{p.clearMarkers()})),g().then((()=>{m.getPlugin(l.MarkersPlugin).showMarkerTooltip("custom-tooltip-0")}))}))}}))}},o("uaZu")),p=(e=(0,m.A)(e,[["render",function(t,e,o,a,s,l){return(0,n.uX)(),(0,n.CE)("div",i,r)}],["__scopeId","data-v-4097911c"]]),o("taby")),g=o("oekR"),h=(e={components:{vrComponent:e,toast:p.A},setup(){const t=(0,g.KR)(null);return{toastRefDom:t,selectMarker:({marker:e})=>{t.value.addToast({content:e.config.tooltip.toastContent+"-marker标记被点击"})}}}},(0,m.A)(e,[["render",function(t,e,o,i,r,s){var l=(0,n.g2)("vr-component"),c=(0,n.g2)("toast");return(0,n.uX)(),(0,n.CE)("div",a,[(0,n.bF)(l,{onSelectMarker:i.selectMarker},null,8,["onSelectMarker"]),(0,n.bF)(c,{ref:"toastRefDom"},null,512)])}],["__scopeId","data-v-9a4e9052"]]))},"4fZp":function(t,e,o){t.exports=o.p+"static/img/heishou.a580a5c7.png"}}]);